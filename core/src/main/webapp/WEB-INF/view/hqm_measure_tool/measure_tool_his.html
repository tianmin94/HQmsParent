<#include "../include/header.html">
<script src="${base.contextPath}/common/code?HQM_MEASURE_TOOL_TYPE=HQM_MEASURE_TOOL_TYPE"></script>
<script src="${base.contextPath}/common/code?HQM_MET_CHEAK_CYCLE=HQM_MET_CHEAK_CYCLE"></script>
<script src="${base.contextPath}/common/code?HQM_CHECK_TYPE=HQM_CHECK_TYPE"></script>
<script src="${base.contextPath}/common/code?HQM_MEASURE_TOOL_STATUS=HQM_MEASURE_TOOL_STATUS"></script>
<script src="${base.contextPath}/common/code?HQM_MEASURE_TOOL_POSITION_STATUS=HQM_MET_POSITION_STATUS"></script>
<script src="${base.contextPath}/common/code?HQM_MSA_TYPE=HQM_MSA_TYPE"></script>
<script src="${base.contextPath}/common/code?HQM_MSA_CYCLE=HQM_MSA_CYCLE"></script>
<script src="${base.contextPath}/common/code?SYS_YES_NO=SYS.YES_NO"></script>
<script src="${base.contextPath}/common/code?HQM_MSA_STATUS=HQM_MSA_STATUS"></script>
<script src="${base.contextPath}/common/code?HQM_MSA_RESULT=HQM_MSA_RESULT"></script>
<script src="${base.contextPath}/common/code?HQM_CHECK_RESULT=HQM_CHECK_RESULT"></script>
<script src="${base.contextPath}/common/code?HQM_MET_UOM=HQM_MET_UOM"></script>
<script src="${base.contextPath}/common/code?HQM_MET_HIS_TYPE=HQM_MET_HIS_TYPE"></script>
<script type="text/javascript">
	var parentData;
    var viewModel = Hap.createGridViewModel("#grid");
    function openLineWindow(id,type){
   		var dialog = $("#lineWindow").kendoWindow({
   			actions: ["Close"],
   			width: "35%",
   			height: "50%",
   			title: "MSA分析内容历史",
   			visible: false,
   			iframe: true,
   			modal: true,
   			content: 'measure_tool_msa_his.html?measureToolHisId='+id+ "&msaType=" +type
   		}).data("kendoWindow");
   		dialog.center().open();
    }
</script>
<body>
<div id="lineWindow"></div>
<div id="page-content">
    <!-- <div class="pull-left" id="toolbar-btn" style="padding-bottom:10px;">
    </div>
    <script>kendo.bind($('#toolbar-btn'), viewModel);</script>
    <div id="queryPanel" class="pull-right" id="query-form" style="padding-bottom:10px;">
    
    	<div class="k-query-simple" id="query-form">
    		设备编号
            <input type="text" data-role="maskedtextbox" style="float:left;width:150px;margin-right:5px;" placeholder='<@spring.message "MeasureTool.measureToolNum"/>'
                   data-bind="value:model.measureToolNum" class="k-textbox">
            类型
            <input id="measureToolType" style="width:150px;margin-right:5px;" placeholder='<@spring.message "MeasureTool.measureToolType"/>'
			       data-bind="value:model.measureToolType">  
            <script>
	                $("#measureToolType").kendoComboBox({
	               	    dataTextField: "meaning",
	               	    dataValueField: "value",
	               	    valuePrimitive: true,
	               	    dataSource: HQM_MEASURE_TOOL_TYPE
	               	});	                   
			</script>        
            校验方式
            <input id="checkType" style="width:150px;margin-right:5px;" placeholder='<@spring.message "MeasureTool.checkType"/>'
			       data-bind="value:model.checkType">  
            <script>
	                $("#checkType").kendoComboBox({
	               	    dataTextField: "meaning",
	               	    dataValueField: "value",
	               	    valuePrimitive: true,
	               	    dataSource: HQM_CHECK_TYPE
	               	});	                   
			</script> 
        </div>
        <script>kendo.bind($('#query-form'), viewModel);</script>
        <div class="k-query-detail" id="query-form2">
            <div class="rows" style="margin-top:5px">
            状态
            <input id="measureToolStatus" style="width:150px;margin-right:5px;" placeholder='<@spring.message "MeasureTool.measureToolStatus"/>'
			       data-bind="value:model.measureToolStatus">  
            <script>
	                $("#measureToolStatus").kendoComboBox({
	               	    dataTextField: "meaning",
	               	    dataValueField: "value",
	               	    valuePrimitive: true,
	               	    dataSource: HQM_MEASURE_TOOL_STATUS
	               	});	                   
			</script>
			库存状态
            <input id="measureToolPositionStatus" style="width:150px;margin-right:5px;" placeholder='<@spring.message "MeasureTool.measureToolPositionStatus"/>'
			       data-bind="value:model.measureToolPositionStatus">  
            <script>
	                $("#measureToolPositionStatus").kendoComboBox({
	               	    dataTextField: "meaning",
	               	    dataValueField: "value",
	               	    valuePrimitive: true,
	               	    dataSource: HQM_MEASURE_TOOL_POSITION_STATUS
	               	});	                   
			</script>
              下次校验日期从
            <input type="text" data-role="datepicker" style="width:150px;margin-right:5px;" placeholder='<@spring.message "MeasureTool.startTime"/>'
	                   data-bind="value:model.startTime" class="datepicker">
            下次校验日期至
            <input type="text" data-role="datepicker" style="width:150px;margin-right:5px;" placeholder='<@spring.message "MeasureTool.endTime"/>'
            data-bind="value:model.endTime" class="datepicker">  

            </div>
            <div class="rows" style="margin-top:5px">
            是否需要MSA
            <input id="msaFlag" style="width:150px;margin-right:5px;" placeholder='<@spring.message "MeasureTool.msaFlag"/>'
			       data-bind="value:model.msaFlag">  
            <script>
	                $("#msaFlag").kendoComboBox({
	               	    dataTextField: "meaning",
	               	    dataValueField: "value",
	               	    valuePrimitive: true,
	               	    dataSource: SYS_YES_NO
	               	});	                   
			</script>
			MSA结果
            <input id="msaResult" style="width:150px;margin-right:5px;" placeholder='<@spring.message "MeasureTool.msaResult"/>'
			       data-bind="value:model.msaResult">  
            <script>
	                $("#msaResult").kendoComboBox({
	               	    dataTextField: "meaning",
	               	    dataValueField: "value",
	               	    valuePrimitive: true,
	               	    dataSource: HQM_MSA_RESULT
	               	});	                   
			</script>
			MSA状态
            <input id="msaStatus" style="width:150px;margin-right:5px;" placeholder='<@spring.message "MeasureTool.msaStatus"/>'
			       data-bind="value:model.msaStatus">  
            <script>
	                $("#msaStatus").kendoComboBox({
	               	    dataTextField: "meaning",
	               	    dataValueField: "value",
	               	    valuePrimitive: true,
	               	    dataSource: HQM_MSA_STATUS
	               	});	                   
			</script>
			是否有效
            <input id="enableFlag" style="width:150px;margin-right:5px;" placeholder='<@spring.message "MeasureTool.enableFlag"/>'
			       data-bind="value:model.enableFlag">  
            <script>
	                $("#enableFlag").kendoComboBox({
	               	    dataTextField: "meaning",
	               	    dataValueField: "value",
	               	    valuePrimitive: true,
	               	    dataSource: SYS_YES_NO
	               	});	                   
			</script>
            </div>
        </div>
        <script>kendo.bind($('#query-form2'), viewModel);</script>
    
        
        <div style="clear:both"></div>
    </div>
    <script>
    kendo.bind($('#query-form'), viewModel);
    $('#queryPanel').kendoQueryPanel({
        queryFunction: function () {
            viewModel.query();
        },
        resetFunction: function () {
            viewModel.reset();
        }
    });
    </script> -->
    <div style="clear:both">
        <div id="grid"></div>
    </div>
</div>

<script type="text/javascript">
    Hap.initEnterQuery('#query-form', viewModel.query);
    var BaseUrl = _basePath;
    dataSource = new kendo.data.DataSource({
        transport: {
            read: {
                url: BaseUrl + "/hqm/measure/tool/his/query",
                type: "POST",
                dataType: "json"
            },
            parameterMap: function (options, type) {
                if (type !== "read" && options.models) {
                    var datas = Hap.prepareSubmitParameter(options, type)
                    return kendo.stringify(datas);
                } else if (type === "read") {
                	viewModel.model.measureToolId = ${RequestParameters.measureToolId}
                    return Hap.prepareQueryParameter(viewModel.model.toJSON(), options)
                }
            }
        },
        batch: true,
        serverPaging: true,
        pageSize: 20,
        schema: {
            data: 'rows',
            total: 'total',
            model: {
                id: "measureToolId",
                fields: {},
                editable: function(col){
                }
            }
        }
    });

    $("#grid").kendoGrid({
        dataSource: dataSource,
        resizable: true,
        scrollable: true,
        sortable:true,
        navigatable: false,
        selectable: '',
        dataBound: function () {
            if (parent.autoResizeIframe) {
                parent.autoResizeIframe('${RequestParameters.functionCode!}')
            }
        },
        pageable: {
            pageSizes: [5, 10, 20, 50],
            refresh: true,
            buttonCount: 5
        },
        columns: [
        	{
                field: "hisType",
                title: '<@spring.message "measuretool.histype"/>',
                width: 150,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"},
                template: function (dataItem) {
                    var v = dataItem.hisType ? dataItem.hisType : "";
                    $.each(HQM_MET_HIS_TYPE, function (i, n) {
                        if ((n.value || '').toLowerCase() == (v || '').toLowerCase()) {
                            v = n.meaning;
                            return v;
                        }
                    });
                    return v;
                },
                editor: function (container, options) {
                    $('<input name="' + options.field + '"/>')
                        .appendTo(container)
                        .kendoDropDownList({
                            dataTextField: "meaning",
                            dataValueField: "value",
                            valuePrimitive: true,
                            dataSource:HQM_MET_HIS_TYPE
                        });
                }
            },
            {
                field: "updatedName",
                title: '<@spring.message "measuretool.updatedName"/>',
                width: 150,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"}
            },
                    {
                field: "lastUpdateDate",
                title: '<@spring.message "measuretool.lastUpdateDate"/>',
                width: 150,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"}
            },
                    {
                field: "measureToolNum",
                title: '<@spring.message "measuretool.measuretoolnum"/>',
                width: 150,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"}
            },
                    {
                field: "descriptions",
                title: '<@spring.message "measuretool.descriptions"/>',
                width: 150,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"}
            },
                    {
                field: "measureToolType",
                title: '<@spring.message "measuretool.measuretooltype"/>',
                width: 120,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"},
                template: function (dataItem) {
                    var v = dataItem.measureToolType ? dataItem.measureToolType : "";
                    $.each(HQM_MEASURE_TOOL_TYPE, function (i, n) {
                        if ((n.value || '').toLowerCase() == (v || '').toLowerCase()) {
                            v = n.meaning;
                            return v;
                        }
                    });
                    return v;
                },
                editor: function (container, options) {
                    $('<input name="' + options.field + '"/>')
                        .appendTo(container)
                        .kendoDropDownList({
                            dataTextField: "meaning",
                            dataValueField: "value",
                            valuePrimitive: true,
                            dataSource:HQM_MEASURE_TOOL_TYPE
                        });
                }
            },
            {
                field: "purchaseDate",
                title: '<@spring.message "measuretool.purchasedate"/>',
                width: 150,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"}
            },
            {
                field: "outboundDate",
                title: '<@spring.message "measuretool.outbounddate"/>',
                width: 150,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"}
            },         
            {
                field: "returnDate",
                title: '<@spring.message "measuretool.returndate"/>',
                width: 150,
                attributes: {style: "text-align:center;white-space: nowrap;"},
                headerAttributes: {style: "text-align:center"}
            },   
        	{
                field: "plantCode",
                title: '<@spring.message "measuretool.plantCode"/>',
                width: 150,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"}
            },
            {
                field: "measureToolSupplierName",
                title: '<@spring.message "measuretool.measuretoolsupplier"/>',
                width: 120,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"}
            },
            {
                field: "measureToolMaker",
                title: '<@spring.message "measuretool.measureToolMaker"/>',
                width: 200,
                attributes: {style: "text-align:center;white-space: nowrap;"},
                headerAttributes: {style: "text-align:center"},
            },
            {
                field: "measuringRange",
                title: '<@spring.message "measuretool.measuringrange"/>',
                width: 120,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"}
            },
            {
                field: "measurementAccuracy",
                title: '<@spring.message "measuretool.measurementaccuracy"/>',
                width: 120,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"}
            },
            {
                field: "uom",
                title: '<@spring.message "measuretool.uom"/>',
                width: 120,
                attributes: {style: "text-align:center;white-space: nowrap;"},
                headerAttributes: {style: "text-align:center"},
                template: function (dataItem) {
                    var v = dataItem.uom ? dataItem.uom : "";
                    $.each(HQM_MET_UOM, function (i, n) {
                        if ((n.value || '').toLowerCase() == (v || '').toLowerCase()) {
                            v = n.meaning;
                            return v;
                        }
                    });
                    return v;
                },
                editor: function (container, options) {
                    $('<input name="' + options.field + '"/>')
                        .appendTo(container)
                        .kendoDropDownList({
                            dataTextField: "meaning",
                            dataValueField: "value",
                            valuePrimitive: true,
                            dataSource: HQM_MET_UOM
                        });
                }
            },
            
            {
                field: "firstUseDate",
                title: '<@spring.message "measuretool.firstusedate"/>',
                width: 150,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"}
            },
            {
                field: "name",
                title: '<@spring.message "measuretool.usedepartment"/>',
                width: 200,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"},
                template: function (Item) {
                    return Item['name'] || ''
                },
                editor: function (container, options) {
                    $('<input  name="' + options.field + '"/>')
                        .appendTo(container)
                        .kendoLov($.extend(<@lov "LOV_UNIT_HQM"/>, {
                        query: function (e) {
                            //e.param['plantId'] = viewModel.model.plantId;
                        },
                        textField: 'name',
                        model: options.model,
                        select:function(e) {
                       		options.model.useDepartment = e.item.unitId
                        }
                    }));
                }, 
            },
            {
                field: "userName",
                title: '<@spring.message "measuretool.principal"/>',
                width: 120,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"},
                template: function (Item) {
                    return Item['userName'] || ''
                },
                editor: function (container, options) {
                    $('<input name="' + options.field + '"/>')
                        .appendTo(container)
                        .kendoLov($.extend(<@lov "LOV_USER"/>, {
                        query: function (e) {
                        },
                        textField: 'userName',
                        model: options.model,
                        select:function(e) {
                        	options.model.principal = e.item.userId
                        }
                    }));
                },
            },
            {
                field: "checkCycle",
                title: '<@spring.message "measuretool.checkcycle"/>',
                width: 120,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"},
                template: function (dataItem) {
                    var v = dataItem.checkCycle ? dataItem.checkCycle : "";
                    $.each(HQM_MET_CHEAK_CYCLE, function (i, n) {
                        if ((n.value || '').toLowerCase() == (v || '').toLowerCase()) {
                            v = n.meaning;
                            return v;
                        }
                    });
                    return v;
                },
                editor: function (container, options) {
                    $('<input name="' + options.field + '"/>')
                        .appendTo(container)
                        .kendoDropDownList({
                            dataTextField: "meaning",
                            dataValueField: "value",
                            valuePrimitive: true,
                            dataSource:HQM_MET_CHEAK_CYCLE
                        });
                }
            },
            {
                field: "keyProcess",
                title: '<@spring.message "measuretool.keyprocess"/>',
                width: 120,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"}
            },
                    {
                field: "positionTitle",
                title: '<@spring.message "measuretool.positiontitle"/>',
                width: 120,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"}
            },
            {
                field: "lastCheckDate",
                title: '<@spring.message "measuretool.lastcheckdate"/>',
                width: 150,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"}
            },
                    {
                field: "nextCheckDate",
                title: '<@spring.message "measuretool.nextcheckdate"/>',
                width: 150,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"}
            },
            
            {
                field: "checkType",
                title: '<@spring.message "measuretool.checktype"/>',
                width: 120,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"},
                template: function (dataItem) {
                    var v = dataItem.checkType ? dataItem.checkType : "";
                    $.each(HQM_CHECK_TYPE, function (i, n) {
                        if ((n.value || '').toLowerCase() == (v || '').toLowerCase()) {
                            v = n.meaning;
                            return v;
                        }
                    });
                    return v;
                },
                editor: function (container, options) {
                    $('<input name="' + options.field + '"/>')
                        .appendTo(container)
                        .kendoDropDownList({
                            dataTextField: "meaning",
                            dataValueField: "value",
                            valuePrimitive: true,
                            dataSource:HQM_CHECK_TYPE
                        });
                }
            },
                  
            {
                field: "checkResult",
                title: '<@spring.message "measuretool.checkResult"/>',
                width: 120,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"},
                template: function (dataItem) {
                    var v = dataItem.checkResult ? dataItem.checkResult : "";
                    $.each(HQM_CHECK_RESULT, function (i, n) {
                        if ((n.value || '').toLowerCase() == (v || '').toLowerCase()) {
                            v = n.meaning;
                            return v;
                        }
                    });
                    return v;
                },
                editor: function (container, options) {
                    $('<input name="' + options.field + '"/>')
                        .appendTo(container)
                        .kendoDropDownList({
                            dataTextField: "meaning",
                            dataValueField: "value",
                            valuePrimitive: true,
                            dataSource:HQM_CHECK_RESULT
                        });
                }
            },
            {
                field: "supplierName",
                title: '<@spring.message "measuretool.checkedby"/>',
                width: 120,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"}
            },
            {
                field: "measureToolStatus",
                title: '<@spring.message "measuretool.measuretoolstatus"/>',
                width: 120,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"},
                template: function (dataItem) {
                    var v = dataItem.measureToolStatus ? dataItem.measureToolStatus : "";
                    $.each(HQM_MEASURE_TOOL_STATUS, function (i, n) {
                        if ((n.value || '').toLowerCase() == (v || '').toLowerCase()) {
                            v = n.meaning;
                            return v;
                        }
                    });
                    return v;
                },
                editor: function (container, options) {
                    $('<input name="' + options.field + '"/>')
                        .appendTo(container)
                        .kendoDropDownList({
                            dataTextField: "meaning",
                            dataValueField: "value",
                            valuePrimitive: true,
                            dataSource:HQM_MEASURE_TOOL_STATUS
                        });
                }
            },
              
                    {
                field: "measureToolPositionStatus",
                title: '<@spring.message "measuretool.measuretoolpositionstatus"/>',
                width: 120,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"},
                template: function (dataItem) {
                    var v = dataItem.measureToolPositionStatus ? dataItem.measureToolPositionStatus : "";
                    $.each(HQM_MEASURE_TOOL_POSITION_STATUS, function (i, n) {
                        if ((n.value || '').toLowerCase() == (v || '').toLowerCase()) {
                            v = n.meaning;
                            return v;
                        }
                    });
                    return v;
                },
                editor: function (container, options) {
                    $('<input name="' + options.field + '"/>')
                        .appendTo(container)
                        .kendoDropDownList({
                            dataTextField: "meaning",
                            dataValueField: "value",
                            valuePrimitive: true,
                            dataSource:HQM_MEASURE_TOOL_POSITION_STATUS
                        });
                }
            },
            {
                field: "scrapReason",
                title: '<@spring.message "measuretool.scrapreasongrid"/>',
                width: 120,
                attributes: {style: "text-align:center;white-space: nowrap;"},
                headerAttributes: {style: "text-align:center"}
            },
            {
                field: "repairReason",
                title: '<@spring.message "measuretool.repairreasongrid"/>',
                width: 150,
                attributes: {style: "text-align:center;white-space: nowrap;"},
                headerAttributes: {style: "text-align:center"}
            }, 
            {
                field: "msaFlag",
                title: '<@spring.message "measuretool.msaflag"/>',
                width: 120,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"},
                template: function (dataItem) {
                    var v = dataItem.msaFlag ? dataItem.msaFlag : "";
                    $.each(SYS_YES_NO, function (i, n) {
                        if ((n.value || '').toLowerCase() == (v || '').toLowerCase()) {
                            v = n.meaning;
                            return v;
                        }
                    });
                    return v;
                },
                editor: function (container, options) {
                    $('<input name="' + options.field + '"/>')
                        .appendTo(container)
                        .kendoDropDownList({
                            dataTextField: "meaning",
                            dataValueField: "value",
                            valuePrimitive: true,
                            dataSource:SYS_YES_NO
                        });
                }
            },     
                  
            {
                field: "msaType",
                title: '<@spring.message "measuretool.msatype"/>',
                width: 120,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"},
                template: function (dataItem) {
                    var v = dataItem.msaType ? dataItem.msaType : "";
                    $.each(HQM_MSA_TYPE, function (i, n) {
                        if ((n.value || '').toLowerCase() == (v || '').toLowerCase()) {
                            v = n.meaning;
                            return v;
                        }
                    });
                    return v;
                },
                editor: function (container, options) {
                    $('<input name="' + options.field + '"/>')
                        .appendTo(container)
                        .kendoDropDownList({
                            dataTextField: "meaning",
                            dataValueField: "value",
                            valuePrimitive: true,
                            dataSource:HQM_MSA_TYPE
                        });
                }
            },
            {
                field: "msaCycle",
                title: '<@spring.message "measuretool.msacycle"/>',
                width: 120,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"},
                template: function (dataItem) {
                    var v = dataItem.msaCycle ? dataItem.msaCycle : "";
                    $.each(HQM_MSA_CYCLE, function (i, n) {
                        if ((n.value || '').toLowerCase() == (v || '').toLowerCase()) {
                            v = n.meaning;
                            return v;
                        }
                    });
                    return v;
                },
                editor: function (container, options) {
                    $('<input name="' + options.field + '"/>')
                        .appendTo(container)
                        .kendoDropDownList({
                            dataTextField: "meaning",
                            dataValueField: "value",
                            valuePrimitive: true,
                            dataSource:HQM_MSA_CYCLE
                        });
                }
            },
            {
                field: "judgementStandard",
                title: '<@spring.message "measuretool.judgementstandard"/>',
                width: 120,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"}
            },
            {
                field: "msaResult",
                title: '<@spring.message "measuretool.msaresult"/>',
                width: 120,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"},
                template: function (dataItem) {
                    var v = dataItem.msaResult ? dataItem.msaResult : "";
                    $.each(HQM_MSA_RESULT, function (i, n) {
                        if ((n.value || '').toLowerCase() == (v || '').toLowerCase()) {
                            v = n.meaning;
                            return v;
                        }
                    });
                    return v;
                },
                editor: function (container, options) {
                    $('<input name="' + options.field + '"/>')
                        .appendTo(container)
                        .kendoDropDownList({
                            dataTextField: "meaning",
                            dataValueField: "value",
                            valuePrimitive: true,
                            dataSource:HQM_MSA_RESULT
                        });
                }
            },
            {
                field: "msaStatus",
                title: '<@spring.message "measuretool.msastatus"/>',
                width: 120,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"},
                template: function (dataItem) {
                    var v = dataItem.msaStatus ? dataItem.msaStatus : "";
                    $.each(HQM_MSA_STATUS, function (i, n) {
                        if ((n.value || '').toLowerCase() == (v || '').toLowerCase()) {
                            v = n.meaning;
                            return v;
                        }
                    });
                    return v;
                },
                editor: function (container, options) {
                    $('<input name="' + options.field + '"/>')
                        .appendTo(container)
                        .kendoDropDownList({
                            dataTextField: "meaning",
                            dataValueField: "value",
                            valuePrimitive: true,
                            dataSource:HQM_MSA_STATUS
                        });
                }
            },
            
            {
                field: "",
                title: '<@spring.message "measuretool.msaContent"/>',
                width: 120,
                attributes: {style: "text-align:center"},
                headerAttributes: {style: "text-align:center"},
                template: function(rowdata){
                	data = rowdata;
                	return '<a style="color:blue" href="javascript:void(0)" onclick="openLineWindow('+rowdata.measureToolHisId+','+rowdata.msaType+')">MSA分析内容历史</a>'
                },
            },
            
//                     {
//                 field: "enableFlag",
//                 title: '<@spring.message "measuretool.enableflag"/>',
//                 width: 120,
//                 attributes: {style: "text-align:center"},
//                 headerAttributes: {style: "text-align:center"},
//                 template: function (dataItem) {
//                     var v = dataItem.enableFlag ? dataItem.enableFlag : "";
//                     $.each(SYS_YES_NO, function (i, n) {
//                         if ((n.value || '').toLowerCase() == (v || '').toLowerCase()) {
//                             v = n.meaning;
//                             return v;
//                         }
//                     });
//                     return v;
//                 },
//                 editor: function (container, options) {
//                     $('<input name="' + options.field + '"/>')
//                         .appendTo(container)
//                         .kendoDropDownList({
//                             dataTextField: "meaning",
//                             dataValueField: "value",
//                             valuePrimitive: true,
//                             dataSource:SYS_YES_NO
//                         });
//                 }
//             },                            
        ],
        editable: false
    });
    Hap.autoResizeGrid('#grid');
</script>
</body>
</html>